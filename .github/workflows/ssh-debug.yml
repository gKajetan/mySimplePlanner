name: Debug SSH Connection
on: workflow_dispatch

jobs:
  debug_ssh:
    runs-on: ubuntu-latest
    steps:
      - name: Test SSH Connection
        uses: appleboy/ssh-action@v1.0.3
        with:
          host: ${{ secrets.SSH_HOST }}
          username: ${{ secrets.SSH_USERNAME }}
          key: ${{ secrets.SSH_PRIVATE_KEY }}
          port: 22
          script_stop: true
          # ---------------------------------------------------
          # ðŸ‘‡ THESE TWO LINES ARE THE FIX ðŸ‘‡
          debug: true # Shows us the raw SSH handshake logs
          request_pty: true # Forces the server to send output back
          # ---------------------------------------------------
          command_timeout: 2m
          script: |
            echo "----------------------------------------"
            echo "âœ… TERMINAL ALLOCATED!"
            echo "User: $(whoami)"
            echo "Directory: $(pwd)"
            echo "Hostname: $(hostname)"
            echo "----------------------------------------"
